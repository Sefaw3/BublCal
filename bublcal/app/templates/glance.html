{% extends "base.html" %}
{% load static %}

{% block title %}Day at a Glance{% endblock title %}

{% block content %}
    <span class="container pt-4"></span>
    <div class="container container-glance">
        {# Label Row #}
        <div class="row">
            <div class="col-6">{{ today_name }}</div>
            <div class="col">{{ tomorrow_name }}</div>
            <div class="col">{{ overmorrow_name }}</div>
        </div>

        {# Bubble Row #}
        <div class="row">
            <div class="col-6">

                {# Display all timeslots available for the day #}
                {% for slot in timeSlots %}
                    <div class="timeslot">{{slot.1}}</div>

                    {# Display bubbles that fall under the time slot #}
                    {% for bubl in bubls %}
                        {% if bubl.time.hour == slot.0 %}
                            <div style="color: black">
                                <button class="btn btn-primary bubble" 
                                        type="button" 
                                        data-bs-toggle="offcanvas" 
                                        data-bs-target="#offcanvasBottom" 
                                        aria-controls="offcanvasBottom"
                                >{{ bubl.name }}</button>

                                <!-- BUBBLE EDIT -->
                                <div    class="offcanvas offcanvas-bottom" 
                                        tabindex="-1" 
                                        id="offcanvasBottom" 
                                        aria-labelledby="offcanvasBottomLabel">
                                    <div class="offcanvas-header">
                                        <h5 class="offcanvas-title" 
                                            id="offcanvasBottomLabel"
                                        >{{ bubl.name }} @ {{ bubl.time }} {{ bubl.date }}</h5>

                                        <!-- Close popup-->
                                        <button type="button" 
                                        class="btn-close text-reset" 
                                        data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                    </div>
                                    <div class="offcanvas-body small">
                                        <h5>{{ bubl.note }}</h5>
                                        <a href="/app/modify/{{bubl.id}}"><button>Modify</button></a>
                                        <a href="/app/delete/{{bubl.id}}"><button>Delete</button></a>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
                <br>
            </div>

            {# Side-bubbles for tomorrow #}
            <div class="col">
                <center>
                    {% for i in tomorrowTasks %}
                        <div class="sideBubble"></div>
                    {% endfor %}
                </center>
            </div>

            {# Side-bubbles for overmorrow #}
            <div class="col">
                <center>
                    {% for i in overmorrowTasks %}
                        <div class="sideBubble"></div>
                    {% endfor %}
                </center>
            </div>

        </div>
    </div>
{% endblock content %}